(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-equipment-equiment_screen-equiment_screen"],{"129d":function(e,t,i){"use strict";i.r(t);var n=i("f2fc"),a=i("42a9");for(var c in a)"default"!==c&&function(e){i.d(t,e,(function(){return a[e]}))}(c);i("f85f");var o,r=i("f0c5"),s=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"c2fb7122",null,!1,n["a"],o);t["default"]=s.exports},"1439c":function(e,t,i){"use strict";i.r(t);var n=i("b921"),a=i("e9ca");for(var c in a)"default"!==c&&function(e){i.d(t,e,(function(){return a[e]}))}(c);i("b9b5");var o,r=i("f0c5"),s=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"b3fd61bc",null,!1,n["a"],o);t["default"]=s.exports},"20a5":function(e,t,i){"use strict";var n=i("4ea4");i("4de4"),i("4160"),i("d81d"),i("ac1f"),i("1276"),i("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("96cf");var a=n(i("1da1")),c=i("a119"),o=new c.DeviceApi,r={name:"screen_item",data:function(){return{keyStr:"name",popShow:!1,searchValue:"",scrollHeight:"",screenList:[],workItems:[],typeItems:[]}},mounted:function(){this.getElInfo()},created:function(){this.getTypeDataWay()},computed:{groupIds:function(){var e=[];return this.workItems.forEach((function(t){t.active&&e.push(t.id),t.children.forEach((function(t){t.active&&e.push(t.id)}))})),e.join(",")},typeIds:function(){var e=[];return this.typeItems.forEach((function(t){t.active&&e.push(t.id)})),e.join(",")},paramsItem:function(){var e={},t=[];return this.groupIds&&t.push({column:"groupId",ptype:"int",type:"in",value:this.groupIds}),this.typeIds&&t.push({column:"typeId",ptype:"int",type:"in",value:this.typeIds}),this.searchValue&&t.push({column:"deviceName",ptype:"String",type:"like",value:this.searchValue}),e.conditionJson1=t,e}},methods:{workshopClick:function(e,t){this.workItems[t].active=!this.workItems[t].active,this.workItems.forEach((function(e){e.children.map((function(t){t.active=e.active}))}))},lineClick:function(e,t){this.workItems[e].children[t].active=!this.workItems[e].children[t].active},typeClick:function(e,t){this.typeItems[t].active=!this.typeItems[t].active},resetClick:function(){this.searchValue="",this.typeItems.map((function(e){e.active=!1})),this.workItems.map((function(e){e.active=!1,e.children.map((function(e){e.active=!1}))}))},determineClick:function(){this.$emit("determineClick",this.paramsItem),this.closeWay()},closeWay:function(){this.popShow=!1},showWay:function(){this.popShow=!0},openClick:function(){this.getElInfo()},dealWithScreenWay:function(){var e=this,t=[],i=[];this.screenList.forEach((function(n){"groupId"===n.column&&(t=n.value.split(",")),"typeId"===n.column?i=n.value.split(","):"deviceName"===n.column&&(e.searchValue=n.value)})),t.length>0&&t.forEach((function(t){e.workItems.map((function(e){e.id==t&&(e.active=!0),e.children.map((function(e){e.id==t&&(e.active=!0)}))}))})),i.length>0&&i.forEach((function(t){e.typeItems.map((function(e){e.id==t&&(e.active=!0)}))}))},getScreenListWay:function(e){this.screenList=e},getTypeDataWay:function(){var e=this;o.getDeviceListInformationQueryParameter((function(t){if("0000"===t.code){for(var i=[],n=[],a=0;a<t.rows.length;a++){var c=t.rows[a];"typeId"==c.sqlName?i=c.parameterValueList.map((function(e){return e.active=!1,e})):"groupId"==c.sqlName&&(n=c.parameterValueList.map((function(e){return e.active=!1,e})))}e.typeItems=i;var o=[];o=n.filter((function(e){if("2"==e.type)return e}));var r=[];r=n.filter((function(e){if("3"==e.type)return e})),o.map((function(e){var t=[];r.forEach((function(i){e.id==i.pid&&t.push(i)})),e.children=t,0===e.children.length&&e.children.push(e)})),e.workItems=o,e.dealWithScreenWay()}}))},getElInfo:function(){var e=this;return(0,a.default)(regeneratorRuntime.mark((function t(){var i,n,a,c,o,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$u.getRect(".search_nav_view");case 2:i=t.sent,n=i.height,a=n/(uni.upx2px(n)/n),c=e.$store.state.phoneInfo,c.windowHeight&&(o=0,r=c.screenHeight-c.safeArea.bottom,o=0===r?c.safeArea.height-20:c.safeArea.height,s=o/(uni.upx2px(o)/o),e.scrollHeight=s-(a+200));case 7:case"end":return t.stop()}}),t)})))()}}};t.default=r},"345a":function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* uni.scss */.search[data-v-b3fd61bc]{height:%?80?%;margin:%?20?% %?17?% %?20?% %?23?%;background-color:#f5f5f5;border-radius:%?40?%;padding:%?0?% %?10?% %?0?% %?5?%}.search_btn[data-v-b3fd61bc]{padding:%?0?% %?30?%;height:%?60?%;line-height:%?60?%;border-radius:%?30?%;font-size:%?24?%;background-color:#0871db;color:#fff}.screen_view[data-v-b3fd61bc]{padding-top:%?17?%;width:100%;border-top:%?2?% solid #bbb}.screen_view .left_screen[data-v-b3fd61bc]{width:%?205?%;height:100%;padding-bottom:%?10?%;background-color:#eee;border-radius:0 %?20?% %?20?% %?0?%}.screen_view .right_screen[data-v-b3fd61bc]{width:calc(100% - %?205?%);height:100%;padding:%?0?% %?18?%}.screen_view .right_screen_title[data-v-b3fd61bc]{margin-left:%?30?%;height:%?60?%;line-height:%?60?%;font-size:%?24?%;color:#666}.screen_view .right_screen_top[data-v-b3fd61bc]{height:calc(70% - %?42?%)}.screen_view .right_screen_line[data-v-b3fd61bc]{margin:%?20?% %?0?%;height:%?2?%;background-color:#bbb}.screen_view .right_screen_type[data-v-b3fd61bc]{height:30%}.screen_view .right_screen_type_scroll[data-v-b3fd61bc]{height:calc(100% - %?60?%)}.screen_view .screen_items[data-v-b3fd61bc]{width:100%;flex-wrap:wrap}.screen_view .screen_items .screen_type_items[data-v-b3fd61bc]{position:relative;margin:%?15?% %?20?%}.screen_view .screen_items .screen_type_items .screen_item_icon[data-v-b3fd61bc]{position:absolute;top:0;right:0;width:%?30?%;height:%?30?%}.screen_view .screen_items .screen_type_items .screen_item[data-v-b3fd61bc]{min-width:%?140?%;max-width:%?175?%;padding:%?0?% %?15?%;text-align:center;height:%?68?%;line-height:%?68?%;font-size:%?24?%;border-radius:%?34?%;color:#f8f9fb}.screen_view .screen_items .screen_type_items .screen_item_normal[data-v-b3fd61bc]{background-color:#f5f5f5;color:#333;border:%?2?% solid #f5f5f5}.screen_view .screen_items .screen_type_items .screen_item_active[data-v-b3fd61bc]{border:%?2?% solid #0871db;color:#0871db}.bottom[data-v-b3fd61bc]{position:absolute;bottom:%?0?%;right:%?0?%;width:100%;height:%?200?%;justify-content:space-around}.bottom_btn[data-v-b3fd61bc]{text-align:center;width:%?260?%;height:%?88?%;line-height:%?88?%;border-radius:%?44?%;background-color:#fff;border:%?1?% solid #0871db}.bottom_btn_one[data-v-b3fd61bc]{color:#0871db}.bottom_btn_two[data-v-b3fd61bc]{background-color:#0871db;color:#fff}',""]),e.exports=t},"42a9":function(e,t,i){"use strict";i.r(t);var n=i("a21e"),a=i.n(n);for(var c in n)"default"!==c&&function(e){i.d(t,e,(function(){return n[e]}))}(c);t["default"]=a.a},"560a":function(e,t,i){var n=i("5660");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("48e76903",n,!0,{sourceMap:!1,shadowMode:!1})},5660:function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* uni.scss */.list_right_icon[data-v-c2fb7122]{position:absolute;right:%?20?%;top:%?15?%;width:%?40?%;height:%?40?%;transition:.3s}.list_right_icon_active[data-v-c2fb7122]{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.item_line[data-v-c2fb7122]{width:100%;background-color:#bbb;height:%?1?%}',""]),e.exports=t},a119:function(e,t,i){"use strict";var n=i("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceApi=void 0;var a=n(i("d4ec")),c=n(i("bee2")),o=n(i("262e")),r=n(i("2caf")),s=i("3909"),u="deviceGroup/",l="deviceLive/",d="appStatisticsDevice/",f=function(e){(0,o.default)(i,e);var t=(0,r.default)(i);function i(){return(0,a.default)(this,i),t.apply(this,arguments)}return(0,c.default)(i,[{key:"getCodeToDeviceDetail",value:function(e,t){var i="device/getPageDeviceByDeviceCode.action?deviceCode="+e;this.commonAjax(null,i,1,t)}},{key:"getAllDeviceGroupInformation",value:function(e){var t=getApp().globalData.factoryId,i=u+"getAllDeviceGroupInformation.action?factoryId="+t;this.commonAjax(null,i,1,e)}},{key:"getPageDeviceListInformationVo",value:function(e,t,i,n){var a=u+"getPageDeviceListInformationVo.action?current="+t+"&size="+i;this.commonAjax(e,a,1,n)}},{key:"getAllGroupByFactoryId",value:function(e){var t=getApp().globalData.factoryId,i=u+"getAllGroupByFactoryId.action?factoryId="+t;this.commonAjax(null,i,1,e)}},{key:"getDeviceListInformationQueryParameter",value:function(e){var t=getApp().globalData.factoryId,i=u+"getDeviceListInformationQueryParameter.action?factoryId="+t;this.commonAjax(null,i,1,e)}},{key:"getDeviceInfo",value:function(e,t){var i=l+"getDeviceInfo.action?deviceCode="+e;this.commonAjax(null,i,1,t)}},{key:"getPageHamsterInformation",value:function(e,t,i,n,a){var c=l+"getPageHamsterInformation.action?deviceCode="+e+"&current="+t+"&size="+i+"&time="+n;this.commonAjax(null,c,1,a)}},{key:"getListAPPQueryParameter",value:function(e,t){var i=l+"getListAPPQueryParameter.action?deviceCode="+e;this.commonAjax(null,i,1,t)}},{key:"getPageAPPHamsterInformation",value:function(e,t,i,n,a){var c=l+"getPageAPPHamsterInformation.action?deviceCode="+e+"&relationshipIds="+t+"&current="+i+"&size="+n;this.commonAjax(null,c,1,a)}},{key:"getOneDayDetailStateClockInfo",value:function(e,t,i,n,a){var c=l+"getOneDayDetailStateClockInfo.action?deviceCode="+e+"&current="+t+"&size="+i+"&time="+n;this.commonAjax(null,c,1,a)}},{key:"getOneDayDetailStateClock",value:function(e,t,i){var n=l+"getOneDayDetailStateClock.action?deviceCode="+e+"&time="+t;this.commonAjax(null,n,1,i)}},{key:"getOEEVaildStartingUp",value:function(e,t,i){var n=d+"getDeviceTimeAvailability.action";this.commonAjax(e,n,2,i)}},{key:"getWarnStatistics",value:function(e,t,i){var n=d+"getDeviceTimeWarnCount.action";this.commonAjax(e,n,2,i)}},{key:"getProduction",value:function(e,t,i){var n=d+"getDeviceTimeProduction.action";this.commonAjax(e,n,2,i)}},{key:"selectDeviceByCondition",value:function(e,t){var i="device/selectDeviceByCondition.action";this.commonAjax(e,i,2,t)}},{key:"updateBatchDevice",value:function(e,t){var i="device/updateBatchDevice.action";this.commonAjax(e,i,2,t)}},{key:"getPageDeviceComplexByCondition",value:function(e,t,i,n){var a="device/getPageDeviceComplexByCondition.action?current="+t+"&size="+i;this.commonAjax(e,a,1,n)}},{key:"getImage",value:function(e,t){var i="fileResource/getById.action";this.commonAjax(e,i,2,t)}},{key:"extendPropertyInsertOrUpdateBatch",value:function(e,t){var i="extendPropertyValue/insertOrUpdateBatch.action";this.commonAjax(e,i,3,t)}}]),i}(s.Request);t.DeviceApi=f},a21e:function(e,t,i){"use strict";var n=i("4ea4");i("99af"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("96cf");var a=n(i("1da1")),c=n(i("b14e")),o=n(i("dd8d")),r=n(i("1439c")),s=n(i("a8c5")),u=n(i("b7a2")),l=i("a119"),d=new l.DeviceApi,f={mixins:[u.default],components:{navbarItem:c.default,twoListItem:o.default,screenItem:r.default},data:function(){return{groupId:"",lists:[],downOption:{auto:!1},upOption:{},searchParams:{},searchList:[],groupIds:""}},onLoad:function(e){this.upOption=s.default.getUpOption(this),e.params&&(this.searchParams=JSON.parse(e.params),this.searchList=this.searchParams.conditionJson1)},onReady:function(){this.$refs.screenRef.getScreenListWay(this.searchList)},onHide:function(){this.$refs.screenRef.closeWay()},computed:{themeColor:function(){return this.$store.state.config.lfColorConfig.themeColor},isScreen:function(){return this.searchList.length>0}},methods:{rightWay:function(){this.$refs.screenRef.showWay()},upOrDownClick:function(e,t){var i=this;return(0,a.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i.groupId=e.groupId==i.groupId?"":e.groupId;case 1:case"end":return t.stop()}}),t)})))()},screenWay:function(e){this.searchParams=e,this.searchList=e.conditionJson1,uni.pageScrollTo({scrollTop:0,duration:0}),null!=this.mescroll&&this.mescroll.triggerDownScroll(!0)},chooseClick:function(e){uni.navigateTo({url:"../equipment_detail/equipment_detail?deviceCode="+e.deviceCode})},upCallback:function(e){var t=this;d.getPageDeviceListInformationVo(this.searchParams,e.num,e.size,(function(i){"0000"===i.code&&("0000"===i.code?(t.mescroll.endSuccess(i.rows.length),1==e.num&&(t.lists=[]),t.lists=t.lists.concat(i.rows)):t.mescroll.endErr())}))}}};t.default=f},a4ef:function(e,t,i){var n=i("345a");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("4bcf427c",n,!0,{sourceMap:!1,shadowMode:!1})},a8c5:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){return{use:!0,auto:!0,native:!1,textInOffset:e.$t("下拉刷新"),textOutOffset:e.$t("释放更新"),textLoading:e.$t("加载中...."),textSuccess:e.$t("加载成功"),textErr:e.$t("加载失败")}},a=function(e){return{auto:!1,noMoreSize:5,empty:{icon:"/static/images/common/no_content.png",tip:e.$t("~暂无数据哦 ~")}}},c={getDownOption:n,getUpOption:a};t.default=c},b921:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return c})),i.d(t,"a",(function(){return n}));var n={uPopup:i("ca14").default,uNavbar:i("3e04").default,uSearch:i("b41b").default},a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("u-popup",{attrs:{mode:"right",width:"660rpx"},on:{open:function(t){arguments[0]=t=e.$handleEvent(t),e.openClick.apply(void 0,arguments)}},model:{value:e.popShow,callback:function(t){e.popShow=t},expression:"popShow"}},[i("v-uni-view",{staticClass:"search_nav_view"},[i("u-navbar",{attrs:{"title-color":"#818181",title:e.$t("筛选"),"border-bottom":!1,"back-icon-color":"#FFFFFF","is-fixed":!0,"is-back":!1}}),i("v-uni-view",{staticClass:"lf_row_a_f search"},[i("u-search",{attrs:{"show-action":!1,placeholder:e.$t("输入要单独查询的设备名"),"bg-color":"rgba(0,0,0,0)"},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),i("v-uni-view",{staticClass:"search_btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.determineClick.apply(void 0,arguments)}}},[e._v(e._s(e.$t("搜索")))])],1)],1),i("v-uni-view",{staticClass:"screen_view lf_row_a_f",style:{height:e.scrollHeight+"rpx"}},[i("v-uni-scroll-view",{staticClass:"left_screen lf_column_a_f",attrs:{"scroll-y":!0}},[i("v-uni-view",{staticClass:"screen_items lf_column_a_j_f"},e._l(e.workItems,(function(t,n){return i("v-uni-view",{key:n,staticClass:"screen_type_items"},[t.active?i("v-uni-image",{staticClass:"screen_item_icon",attrs:{src:"/static/images/common/screen_tag.png"}}):e._e(),i("v-uni-view",{staticClass:"screen_item screen_overflow",class:t.active?"screen_item_active":"screen_item_normal",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.workshopClick(t,n)}}},[e._v(e._s(t[e.keyStr]))])],1)})),1)],1),i("v-uni-view",{staticClass:"right_screen"},[i("v-uni-scroll-view",{staticClass:"right_screen_top",attrs:{"scroll-y":!0}},e._l(e.workItems,(function(t,n){return i("v-uni-view",{key:n},[i("v-uni-view",{staticClass:"right_screen_title"},[e._v(e._s(t[e.keyStr]))]),i("v-uni-view",{staticClass:"screen_items lf_row_a_f"},e._l(t.children,(function(t,a){return i("v-uni-view",{key:a,staticClass:"screen_type_items"},[t.active?i("v-uni-image",{staticClass:"screen_item_icon",attrs:{src:"/static/images/common/screen_tag.png"}}):e._e(),i("v-uni-view",{staticClass:"screen_item screen_overflow",class:t.active?"screen_item_active":"screen_item_normal",staticStyle:{"max-width":"390rpx"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.lineClick(n,a)}}},[e._v(e._s(t[e.keyStr]))])],1)})),1)],1)})),1),i("v-uni-view",{staticClass:"right_screen_line"}),i("v-uni-view",{staticClass:"right_screen_type"},[i("v-uni-view",{staticClass:"right_screen_title"},[e._v("设备类型")]),i("v-uni-scroll-view",{staticClass:"right_screen_type_scroll",attrs:{"scroll-y":!0}},[i("v-uni-view",{staticClass:"screen_items lf_row_a_f"},e._l(e.typeItems,(function(t,n){return i("v-uni-view",{key:n,staticClass:"screen_type_items"},[t.active?i("v-uni-image",{staticClass:"screen_item_icon",attrs:{src:"/static/images/common/screen_tag.png"}}):e._e(),i("v-uni-view",{staticClass:"screen_item",class:t.active?"screen_item_active":"screen_item_normal",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.typeClick(t,n)}}},[e._v(e._s(t[e.keyStr]))])],1)})),1)],1)],1)],1)],1),i("v-uni-view",{staticClass:"bottom lf_row_a_f"},[i("v-uni-view",{staticClass:"bottom_btn bottom_btn_one",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.resetClick.apply(void 0,arguments)}}},[e._v(e._s(e.$t("重置")))]),i("v-uni-view",{staticClass:"bottom_btn bottom_btn_two",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.determineClick.apply(void 0,arguments)}}},[e._v(e._s(e.$t("确定")))])],1)],1)],1)},c=[]},b9b5:function(e,t,i){"use strict";var n=i("a4ef"),a=i.n(n);a.a},e9ca:function(e,t,i){"use strict";i.r(t);var n=i("20a5"),a=i.n(n);for(var c in n)"default"!==c&&function(e){i.d(t,e,(function(){return n[e]}))}(c);t["default"]=a.a},f2fc:function(e,t,i){"use strict";var n;i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return c})),i.d(t,"a",(function(){return n}));var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"equipment"},[i("v-uni-view",{staticClass:"nav_view"},[i("navbar-item",{attrs:{title:"筛选结果",isScreen:e.isScreen},on:{rightClick:function(t){arguments[0]=t=e.$handleEvent(t),e.rightWay.apply(void 0,arguments)}}})],1),i("mescroll-body",{ref:"mescrollRef",attrs:{up:e.upOption},on:{init:function(t){arguments[0]=t=e.$handleEvent(t),e.mescrollInit.apply(void 0,arguments)},down:function(t){arguments[0]=t=e.$handleEvent(t),e.downCallback.apply(void 0,arguments)},up:function(t){arguments[0]=t=e.$handleEvent(t),e.upCallback.apply(void 0,arguments)}}},e._l(e.lists,(function(t,n){return i("v-uni-view",{key:n,staticStyle:{margin:"20rpx 24rpx 0rpx 24rpx"}},[i("two-list-item",{attrs:{dataItem:t},on:{chooseWay:function(i){arguments[0]=i=e.$handleEvent(i),e.chooseClick(t)}}})],1)})),1),i("screen-item",{ref:"screenRef",on:{determineClick:function(t){arguments[0]=t=e.$handleEvent(t),e.screenWay.apply(void 0,arguments)}}})],1)},c=[]},f85f:function(e,t,i){"use strict";var n=i("560a"),a=i.n(n);a.a}}]);