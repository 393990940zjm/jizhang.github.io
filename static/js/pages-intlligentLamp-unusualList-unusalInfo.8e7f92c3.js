(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-intlligentLamp-unusualList-unusalInfo"],{"06c5":function(t,e,n){"use strict";n("a630"),n("fb6a"),n("d3b7"),n("25f0"),n("3ca3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var i=a(n("6b75"));function a(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(t){if("string"===typeof t)return(0,i.default)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,i.default)(t,e):void 0}}},2909:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var i=u(n("6005")),a=u(n("db90")),o=u(n("06c5")),r=u(n("3427"));function u(t){return t&&t.__esModule?t:{default:t}}function s(t){return(0,i.default)(t)||(0,a.default)(t)||(0,o.default)(t)||(0,r.default)()}},3133:function(t,e,n){var i=n("b728");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("4fd4f151",i,!0,{sourceMap:!1,shadowMode:!1})},3427:function(t,e,n){"use strict";function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},"3afc":function(t,e,n){"use strict";n.r(e);var i=n("a303"),a=n("4e46");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("f9fb");var r,u=n("f0c5"),s=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,"007217ff",null,!1,i["a"],r);e["default"]=s.exports},4281:function(t,e,n){"use strict";var i=n("3133"),a=n.n(i);a.a},4628:function(t,e,n){"use strict";n.r(e);var i=n("8929"),a=n("dc13");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("4281");var r,u=n("f0c5"),s=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,"6bb226ed",null,!1,i["a"],r);e["default"]=s.exports},"4a9c":function(t,e,n){var i=n("c3b2");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("6f1edbe4",i,!0,{sourceMap:!1,shadowMode:!1})},"4e46":function(t,e,n){"use strict";n.r(e);var i=n("9e63"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},6005:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var i=a(n("6b75"));function a(t){return t&&t.__esModule?t:{default:t}}function o(t){if(Array.isArray(t))return(0,i.default)(t)}},"6b75":function(t,e,n){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},8929:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var i={uRadioGroup:n("a760").default,uRadio:n("8901").default,uButton:n("5f80").default,uToast:n("3afc").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"unusualList"},[n("v-uni-view",{staticClass:"titleHead"},[t._v("异常时间【"+t._s(t.stateFunc(t.dataItem.state))+"】")]),n("v-uni-view",{staticClass:"timeClass"},[t._v(t._s(t.dataItem.startTime)+" - "+t._s(t.dataItem.endTime))]),n("v-uni-view",{staticClass:"titleHead"},[t._v("选择异常原因")]),n("v-uni-view",{staticClass:"abnormal"},[n("v-uni-view",{staticClass:"radio_group_con"},[n("u-radio-group",{attrs:{wrap:!0},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.radioGroupChange.apply(void 0,arguments)}},model:{value:t.exceptionId,callback:function(e){t.exceptionId=e},expression:"exceptionId"}},t._l(t.reasonList,(function(e,i){return n("u-radio",{key:i,attrs:{"label-disabled":!1,name:e.exceptionId}},[e.custom?n("v-uni-view",{},[n("v-uni-input",{attrs:{value:e.content,placeholder:"请输入"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputCustom.apply(void 0,arguments)}}})],1):n("v-uni-text",[t._v(t._s(e.content))])],1)})),1)],1)],1),n("u-button",{staticClass:"subBtn",attrs:{shape:"circle",type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submitException.apply(void 0,arguments)}}},[t._v("保存")]),n("u-toast",{ref:"uToast"})],1)},o=[]},"8f35":function(t,e,n){"use strict";var i=n("4ea4");n("99af"),n("7db0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("2909")),o=n("d25d"),r=new o.LampApi,u={onLoad:function(){this.dataItem=this.$store.state.unusualInfo,this.getUnusall()},data:function(){return{dataItem:{},exceptionId:null,exceptionContent:"",reasonList:[]}},methods:{stateFunc:function(t){return 2===t?"空闲":3===t?"离线":4===t?"告警":void 0},getUnusall:function(){var t=this;r.listAllExceptionCommon({},(function(e){if("0000"===e.code){var n=[{content:"",exceptionId:"",custom:!0}];t.reasonList=[].concat((0,a.default)(e.rows),n),t.dataItem.exceptionId&&(t.exceptionId=t.dataItem.exceptionId,t.radioGroupChange(t.dataItem.exceptionId))}}))},radioGroupChange:function(t){this.exceptionContent=this.reasonList.find((function(e){return e.exceptionId===t})).content},inputCustom:function(t){this.exceptionContent=t.target.value,this.reasonList[this.reasonList.length-1].content=t.target.value},submitException:function(){var t=this;if(""===this.exceptionContent)return this.common.toastWarningWay("请补充异常信息",this);var e={deviceCode:this.dataItem.deviceCode,endTime:this.dataItem.endTime,mongoDbId:this.dataItem.mongodbId,startTime:this.dataItem.startTime,exceptionContent:this.exceptionContent};this.exceptionId&&(e.exceptionId=this.exceptionId),this.dataItem.exceptionRecordId&&(e.exceptionRecordId=this.dataItem.exceptionRecordId),console.log(e),r.submitException(e,(function(e){"0000"===e.code&&(t.common.toastNormalSuccessWay(e.message,t),setTimeout((function(){var t=getCurrentPages(),e=t[t.length-2];e.$vm.jump=!0,uni.navigateBack({delta:1})}),1e3))}))}}};e.default=u},"9e63":function(t,e,n){"use strict";n("c975"),n("a9e3"),n("b64b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"u-toast",props:{zIndex:{type:[Number,String],default:""}},data:function(){return{isShow:!1,timer:null,config:{params:{},title:"",type:"",duration:2e3,isTab:!1,url:"",icon:!0,position:"center",callback:null,back:!1},tmpConfig:{}}},computed:{iconName:function(){if(["error","warning","success","info"].indexOf(this.tmpConfig.type)>=0&&this.tmpConfig.icon){var t=this.$u.type2icon(this.tmpConfig.type);return t}},uZIndex:function(){return this.isShow?this.zIndex?this.zIndex:this.$u.zIndex.toast:"999999"}},methods:{show:function(t){var e=this;this.tmpConfig=this.$u.deepMerge(this.config,t),this.timer&&(clearTimeout(this.timer),this.timer=null),this.isShow=!0,this.timer=setTimeout((function(){e.isShow=!1,clearTimeout(e.timer),e.timer=null,"function"===typeof e.tmpConfig.callback&&e.tmpConfig.callback(),e.timeEnd()}),this.tmpConfig.duration)},hide:function(){this.isShow=!1,this.timer&&(clearTimeout(this.timer),this.timer=null)},timeEnd:function(){if(this.tmpConfig.url){if("/"!=this.tmpConfig.url[0]&&(this.tmpConfig.url="/"+this.tmpConfig.url),Object.keys(this.tmpConfig.params).length){var t="";/.*\/.*\?.*=.*/.test(this.tmpConfig.url)?(t=this.$u.queryParams(this.tmpConfig.params,!1),this.tmpConfig.url=this.tmpConfig.url+"&"+t):(t=this.$u.queryParams(this.tmpConfig.params),this.tmpConfig.url+=t)}this.tmpConfig.isTab?uni.switchTab({url:this.tmpConfig.url}):uni.navigateTo({url:this.tmpConfig.url})}else this.tmpConfig.back&&this.$u.route({type:"back"})}}};e.default=i},a303:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var i={uIcon:n("d7b2").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"u-toast",class:[t.isShow?"u-show":"","u-type-"+t.tmpConfig.type,"u-position-"+t.tmpConfig.position],style:{zIndex:t.uZIndex}},[n("v-uni-view",{staticClass:"u-icon-wrap"},[t.tmpConfig.icon?n("u-icon",{staticClass:"u-icon",attrs:{name:t.iconName,size:30,color:t.tmpConfig.type}}):t._e()],1),n("v-uni-text",{staticClass:"u-text"},[t._v(t._s(t.tmpConfig.title))])],1)},o=[]},b728:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* uni.scss */*[data-v-6bb226ed]{box-sizing:border-box}uni-page-body[data-v-6bb226ed]{height:100%}.unusualList[data-v-6bb226ed]{height:calc(100% - %?100?%);padding:%?20?%}.unusualList .abnormal[data-v-6bb226ed]{height:calc(100% - %?220?%);margin-top:%?20?%;border-radius:%?10?%;overflow-y:auto}.unusualList .abnormal .radio_group_con[data-v-6bb226ed]{margin-bottom:%?120?%;padding:%?20?% %?30?%;background:#fff}.unusualList .abnormal .radio_group_con[data-v-6bb226ed] .u-radio{margin:%?15?%}.unusualList .abnormal .radio_group_con[data-v-6bb226ed] .u-radio .u-radio__label{margin-left:%?40?%}.timeClass[data-v-6bb226ed]{background:#fff;margin:%?15?% 0;padding:%?30?% %?15?%;border-radius:%?10?%;font-size:%?30?%;text-align:center}.uni-form-item .title[data-v-6bb226ed]{margin:%?15?% 0 0 %?15?%;padding:%?15?% 0 0 %?15?%}.uni-form-item .uni-input[data-v-6bb226ed]{margin:%?15?%;background:#fff;height:%?60?%;padding:%?5?%;text-align:center}.uni-form-item .unipicker[data-v-6bb226ed]{margin:%?15?%;background:#fff;height:%?60?%;padding:%?10?%;text-align:center}.subBtn[data-v-6bb226ed]{position:fixed;bottom:%?10?%;left:0;width:calc(100% - %?40?%);margin:%?15?%;margin-top:%?100?%}',""]),t.exports=e},c3b2:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* uni.scss */.u-toast[data-v-007217ff]{position:fixed;z-index:-1;transition:opacity .3s;text-align:center;color:#fff;border-radius:%?8?%;background:#585858;\ndisplay:flex;flex-direction:row;\nalign-items:center;justify-content:center;font-size:%?28?%;opacity:0;pointer-events:none;padding:%?18?% %?40?%}.u-toast.u-show[data-v-007217ff]{opacity:1}.u-icon[data-v-007217ff]{margin-right:%?10?%;\ndisplay:flex;flex-direction:row;\nalign-items:center;line-height:normal}.u-position-center[data-v-007217ff]{left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);max-width:70%}.u-position-top[data-v-007217ff]{left:50%;top:20%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.u-position-bottom[data-v-007217ff]{left:50%;bottom:20%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.u-type-primary[data-v-007217ff]{color:#2979ff;background-color:#ecf5ff;border:1px solid #d7eafe}.u-type-success[data-v-007217ff]{color:#19be6b;background-color:#dbf1e1;border:1px solid #bef5c8}.u-type-error[data-v-007217ff]{color:#fa3534;background-color:#fef0f0;border:1px solid #fde2e2}.u-type-warning[data-v-007217ff]{color:#f90;background-color:#fdf6ec;border:1px solid #faecd8}.u-type-info[data-v-007217ff]{color:#909399;background-color:#f4f4f5;border:1px solid #ebeef5}.u-type-default[data-v-007217ff]{color:#fff;background-color:#585858}',""]),t.exports=e},d25d:function(t,e,n){"use strict";var i=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.LampApi=void 0;var a=i(n("d4ec")),o=i(n("bee2")),r=i(n("262e")),u=i(n("2caf")),s=n("3909"),c=function(t){(0,r.default)(n,t);var e=(0,u.default)(n);function n(){return(0,a.default)(this,n),e.apply(this,arguments)}return(0,o.default)(n,[{key:"getDeviceRealStateList",value:function(t,e){var n="realUserWork/getDeviceRealStateList.action";this.commonAjax(t,n,1,e)}},{key:"getDeviceHistoryReportByTime",value:function(t,e){var n="realUserWork/getDeviceHistoryReportByTime.action";this.commonAjax(t,n,1,e)}},{key:"getExceptionRecord",value:function(t,e){var n="deviceExceptionalRecord/getExceptionRecord.action";this.commonAjax(t,n,1,e)}},{key:"listAllExceptionCommon",value:function(t,e){var n="exceptionalCommon/listAllExceptionCommon.action";this.get(t,n,e)}},{key:"submitException",value:function(t,e){var n="deviceExceptionalRecord/submitException.action";this.commonAjax(t,n,1,e)}},{key:"deviceGanttChart",value:function(t,e,n,i){var a="?current=1&size=1&startTime="+e+"&endTime="+n,o="webReportStatistics/deviceGanttChart.action"+a;this.commonAjax(t,o,3,i)}},{key:"deviceAndonGanttChart",value:function(t,e,n,i){var a="?current=1&size=1&startTime="+e+"&endTime="+n,o="existFunctionUpdate/getDeviceStateReportStatistics.action"+a;this.commonAjax(t,o,3,i)}},{key:"pageDeviceHourProduction",value:function(t,e){var n="userWorkRecord/pageDeviceHourProduction.action";this.commonAjax(t,n,1,e)}},{key:"listDeviceOee",value:function(t,e){var n="userWorkRecord/listDeviceOee.action";this.commonAjax(t,n,1,e)}},{key:"listDetailDeviceOee",value:function(t,e){var n="userWorkRecord/listDetailDeviceOee.action";this.commonAjax(t,n,1,e)}},{key:"getExceptionStatisticsData",value:function(t,e){var n="deviceExceptionalRecord/getExceptionStatisticsData.action";this.commonAjax(t,n,1,e)}},{key:"getListGroupAndProductionLine",value:function(t,e){var n="deviceGroup/getListGroupAndProductionLine.action";this.commonAjax(t,n,1,e)}},{key:"startWork",value:function(t,e){var n="realUserWork/startWork.action";this.get(t,n,e)}},{key:"startWorkWithInfo",value:function(t,e){var n="realUserWork/startWorkWithInfo.action";this.commonAjax(t,n,1,e)}},{key:"stopWork",value:function(t,e){var n="realUserWork/stopWork.action";this.get(t,n,e)}},{key:"getDeviceWorkState",value:function(t,e){var n="realUserWork/getDeviceWorkState.action";this.get(t,n,e)}},{key:"getWorkDeviceOfUser",value:function(t,e){var n="realUserWork/getWorkDeviceOfUser.action";this.get(t,n,e)}},{key:"getPageByDevice",value:function(t,e,n,i){var a="deviceLive/getPageByDevice.action?current="+e+"&size="+n;this.commonAjax(t,a,1,i)}}]),n}(s.Request);e.LampApi=c},db90:function(t,e,n){"use strict";function i(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("d3b7"),n("3ca3"),n("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},dc13:function(t,e,n){"use strict";n.r(e);var i=n("8f35"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},f9fb:function(t,e,n){"use strict";var i=n("4a9c"),a=n.n(i);a.a}}]);